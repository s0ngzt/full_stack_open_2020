{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","put","delete","Filter","filt","handleFiltChange","value","onChange","Notification","message","className","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Person","person","handleClick","name","number","onClick","Persons","persons","map","key","App","useState","setPersons","setNewName","setFilt","setNewNumber","setMessage","useEffect","personService","then","response","data","personsToShow","filter","toLowerCase","includes","event","target","preventDefault","personObject","res","find","undefined","window","confirm","console","log","returnedPerson","setTimeout","catch","e","concat","_","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.12f99bc6.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n  return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject)\r\n}\r\n\r\nconst dlete = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default { getAll, create, update, dlete }\r\n","import React, { useState,useEffect } from 'react'\r\nimport personService from './services/persons'\r\nimport './index.css'\r\n\r\nconst Filter = ({filt, handleFiltChange}) => {\r\n  return (\r\n    <div>filter shown with <input value={filt} onChange={handleFiltChange} /></div>\r\n  )\r\n}\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst PersonForm = ({addPerson, newName, handleNameChange, newNumber, handleNumberChange}) => {\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input value={newName} onChange={handleNameChange} />\r\n          number: <input value={newNumber} onChange={handleNumberChange} />\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst Person = ({person, handleClick}) => {\r\n  return (\r\n    <div>\r\n      {person.name} {person.number}\r\n      <button onClick={() => handleClick(person.id)} >delete</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Persons = ({persons, handleClick}) => {\r\n  return (\r\n    <div>\r\n      {persons.map( person => <Person key={person.name} person={person} handleClick={handleClick} />)}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ filt, setFilt ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [message, setMessage] = useState('some info...')\r\n\r\n  useEffect(() => {\r\n    //console.log('effect')\r\n    personService\r\n      .getAll()\r\n      .then(response => {\r\n        //console.log('promise fulfilled')\r\n        setPersons(response.data)\r\n      })\r\n    },\r\n    []\r\n  )\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    //已有\r\n    const res = persons.find((person) => person.name === newName)\r\n    if(res !== undefined) {\r\n\r\n      const ans = window.confirm(`${res.name} already in, continue? `)\r\n\r\n      if(ans) {\r\n        //alert(`${newName} is already added to phonebook`)\r\n        console.log(res)\r\n        console.log({...res, number: newNumber})\r\n        personService\r\n          .update(res.id, {...res, number: newNumber})\r\n          .then(response => response.data)\r\n          .then(returnedPerson => {\r\n            setPersons(persons.map(person => person.name !== res.name ? person : returnedPerson))\r\n            setMessage(`changed ${personObject.name}'s number`)\r\n            setTimeout(() => { setMessage(null) }, 5000)\r\n          })\r\n          .catch(\r\n            e => console.log(e)\r\n          )\r\n      }\r\n    }\r\n    else {\r\n      setPersons(persons.concat(personObject))\r\n      personService\r\n        .create(personObject)\r\n        .then(\r\n          setMessage(`addd '${personObject.name}'`),\r\n          setTimeout(() => { setMessage(null) }, 5000)\r\n        )\r\n        .catch(\r\n          e => console.log(e)\r\n        )\r\n    }\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    //console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    //console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFiltChange = (event) => {\r\n    setFilt(event.target.value)\r\n  }\r\n\r\n  const handleDelete = (id) => {\r\n    if(window.confirm(`do you really wanna delete person ${id}`)) {\r\n\r\n      personService\r\n        .dlete(id)\r\n        .then(\r\n          setPersons(persons.filter((person) => person.id !== id))\r\n        )\r\n        .catch(_ => {\r\n          setMessage(`person ${id} already been deleted `)\r\n            //setNotes(notes.filter(n => n.id !== id))\r\n            setTimeout(() => { setMessage(null) }, 5000)\r\n          }\r\n        )\r\n    }\r\n  }\r\n\r\n  const personsToShow = filt === '' ? persons : persons.filter(person => person.name.toLowerCase().includes(filt))\r\n\r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1>\r\n      <Notification message={message} />\r\n      <h2>search</h2>\r\n      <Filter filt={filt} handleFiltChange={handleFiltChange} />\r\n      <h2>add a new</h2>\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons persons={personsToShow} handleClick={handleDelete} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}